<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        const arr = [];
        for (let i = 0; i < 10; i++) {
            arr.push(new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve(i)
                }, Math.random() * (3000 - 1000) + 1000)
            }))
        }

        //会返回一个promise对象 
        //如果数组里所有的promise对象都为已经是成功状态,则会触发then函数的第一个参数,会把数组中所有promise对象的返回值,push进数组并返回
        //如果数组里所有的promise对象有一个是失败状态,而会立即触发then函数的第二个函数,会返回第一个错误信息
        Promise.all(arr).then((ars) => {
            console.log(ars)
        }, (ars) => {
            console.log(ars)
        })


        //==========================例子
        /* 
               小明心中有二十个女神,他决定用更加高效的办法
               他同时给二十个女神表白,如果有女神同意,就拒绝其他女神,并且
               当所有的女神回复完成后,他要把所有的回复都记录到日记进行分析
               用带码模拟上面的场景      
         */

        //进行其中的  当所有的女神回复完成后,他要把所有的回复都记录到日记进行分析 操作
        function biaobai(mi) {
            return new Promise((resolve, reject) => {
                console.log(`向女神${mi}表白`)
                setTimeout(() => {
                    if (Math.random() < 0.1) {
                        resolve(mi)
                    } else {

                        resolve(mi)
                    }
                }, Math.random() * (3000 - 1000) + 1000)
            })
        };
        const arr1 = [];
        for (let l = 0; l < 20; l++) {
            arr1.push(biaobai(l))
        }

       /*  Promise.all(arr1).then((s) => {
            console.log('日记记录',s)
        }) */
    </script>
</body>

</html>